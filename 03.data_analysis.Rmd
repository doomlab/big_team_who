---
title: "Data Analysis"
author: "Erin M. Buchanan"
date: "Last Knitted: `r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Libraries

```{r}
library(dplyr)
library(bib2df)
library(rio)
```

## Import Bib Data

In this section, we are importing the bibtex file that includes all the papers we are going to use. 

Notes:

  - We used the preprint manuscript for some papers because they had the entire author list, we will update their references manually for the final dataset. 
  - We will have to manually add the names for several papers that used consortium authors. 
  - The pre-reg of this document only examines a few authors/papers to ensure code can be run and develop workflow. 

```{r}
bibs <- bib2df("papers.bib")

# get data into long format
long_bib <- bibs %>% unnest_longer(col = AUTHOR)

# remove this nonsense
long_bib$AUTHOR <- gsub("[{}]", "", long_bib$AUTHOR)

# now split the names into last, first middle 
# first split on the comma only 
long_bib <- long_bib %>% separate(col = AUTHOR, sep = ",", 
                                  into = c("last", "first"), 
                                  extra = "merge")

# remove the first space
long_bib$first <- gsub("^ ", "", long_bib$first)

# then split on space
long_bib <- long_bib %>% separate(col = first, sep = " ", 
                                  into = c("first", "middle"),
                                  extra = "merge")

# drop editor column so it is a non-nested DF
long_bib <- long_bib %>% select(-EDITOR)
```

In this section, we will add the information for authors when they used a consortium authorship. 

```{r}

```

## Import Author Data

```{r}
o_works <- import("ORCID_works.csv")
o_ed <- import("ORCID_ed.csv")
o_job <- import("ORCID_job.csv")

s_works <- import("") 
s_info <- import("")
```

## Summary Statistics 

```{r}

```



Person statistics: 
- Career length: from first pub, from first degree
  `publication_date_year_value` anything 
- Employment levels
- Education levels
- # Of works: separate to total, other/preprint/data-set, journal/book/traditional
- Limitations of this system
...average citation rates/h index/i10 index 

Journal statistics: 
- Which journals are publishing this information
  - make sure preprints we are using also have real journal merged in 
- Types of big team research (social, cognitive)
  - keywords 
- Over time: are things becoming more varied
  - are the publications more varied over time 

